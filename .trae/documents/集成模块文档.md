# Everything Doubao Code 集成模块文档

## 1. 代理模块 (Agents)

### 1.1 已集成的代理

| 代理名称 | 描述 | 核心功能 |
|---------|------|----------|
| **architect** | 架构师代理 | 系统设计、可扩展性评估、技术决策 |
| **build-error-resolver** | 构建错误解决器 | TypeScript 错误修复、构建失败解决 |
| **code-reviewer** | 代码审查员 | 代码质量检查、安全性审查、可维护性评估 |
| **database-reviewer** | 数据库审查员 | SQL 优化、数据库架构设计、性能调优 |
| **doc-updater** | 文档更新器 | 文档维护、代码映射生成、README 更新 |
| **e2e-runner** | 端到端测试运行器 | 自动化测试、测试结果分析、测试报告生成 |
| **go-build-resolver** | Go 构建错误解决器 | Go 编译错误修复、go vet 问题解决 |
| **go-reviewer** | Go 代码审查员 | Go 代码质量、并发模式、错误处理评估 |
| **planner** | 规划师 | 需求分析、风险评估、实施计划制定 |
| **python-reviewer** | Python 代码审查员 | Python 代码质量、PEP 8 合规性、性能评估 |
| **refactor-cleaner** | 重构清理器 | 死代码移除、代码合并、重复代码检测 |
| **security-reviewer** | 安全审查员 | 安全漏洞检测、密钥泄露检查、OWASP Top 10 评估 |
| **tdd-guide** | TDD 指导者 | 测试驱动开发、测试覆盖率分析、测试策略制定 |

### 1.2 代理配置

所有代理均使用以下配置：
- **模型**: `doubao`
- **工具**: 根据代理功能配置相应工具集
- **描述**: 详细的代理功能描述

## 2. 命令模块 (Commands)

### 2.1 核心命令

| 命令名称 | 描述 | 使用场景 |
|---------|------|----------|
| **plan** | 创建实施计划 | 新功能开发、架构变更、复杂重构 |
| **code-review** | 代码审查 | 代码质量检查、安全性评估 |
| **test-coverage** | 测试覆盖率分析 | 测试策略制定、覆盖率目标评估 |
| **refactor-clean** | 代码重构清理 | 死代码移除、代码优化 |
| **tdd** | 测试驱动开发 | 新功能开发、bug 修复 |
| **build-fix** | 构建错误修复 | 构建失败解决、TypeScript 错误修复 |
| **test** | 运行测试 | 功能验证、回归测试 |

### 2.2 命令使用方式

所有命令均通过 `/command` 格式使用，例如：
- `/plan 实现用户认证功能`
- `/code-review 审查 src/utils/auth.ts`
- `/test 运行单元测试`

## 3. 技能模块 (Skills)

### 3.1 后端技能

| 技能名称 | 描述 | 适用技术栈 |
|---------|------|----------|
| **backend-patterns** | 后端架构模式 | Node.js、Express、Next.js API |
| **postgres-patterns** | PostgreSQL 模式 | PostgreSQL、Supabase |
| **clickhouse-io** | ClickHouse 数据工程 | ClickHouse、数据分析 |
| **django-patterns** | Django 开发模式 | Django、Django REST Framework |
| **django-security** | Django 安全实践 | Django、Web 安全 |
| **django-tdd** | Django 测试驱动开发 | Django、pytest |
| **springboot-patterns** | Spring Boot 模式 | Spring Boot、Java |
| **springboot-security** | Spring Boot 安全 | Spring Security、OAuth2 |
| **springboot-tdd** | Spring Boot TDD | JUnit、Mockito、Testcontainers |

### 3.2 前端技能

| 技能名称 | 描述 | 适用技术栈 |
|---------|------|----------|
| **frontend-patterns** | 前端开发模式 | React、Next.js、TypeScript |

### 3.3 通用技能

| 技能名称 | 描述 | 适用场景 |
|---------|------|----------|
| **coding-standards** | 编码标准 | 所有编程语言 |
| **security-review** | 安全审查 | 所有代码库 |
| **tdd-workflow** | TDD 工作流 | 所有项目 |
| **continuous-learning** | 持续学习 | 知识管理、模式提取 |
| **python-patterns** | Python 模式 | Python 项目 |
| **python-testing** | Python 测试 | pytest、unittest |
| **golang-patterns** | Go 模式 | Go 项目 |
| **golang-testing** | Go 测试 | Go 测试、benchmarks |
| **java-coding-standards** | Java 编码标准 | Java 项目 |
| **jpa-patterns** | JPA 模式 | Java、Spring Data JPA |
| **verification-loop** | 验证循环 | 代码验证、质量保证 |

## 4. 钩子模块 (Hooks)

### 4.1 已配置的钩子

| 钩子事件 | 描述 | 触发条件 |
|---------|------|----------|
| **PreToolUse** | 工具使用前 | 执行工具前触发，如开发服务器启动、长时间命令提醒 |
| **PreCompact** | 上下文压缩前 | 上下文压缩前保存状态 |
| **SessionStart** | 会话开始时 | 新会话启动时加载上下文 |
| **PostToolUse** | 工具使用后 | 执行工具后触发，如代码格式化、TypeScript 检查 |
| **Stop** | 停止时 | 每次响应后检查 console.log |
| **SessionEnd** | 会话结束时 | 会话结束时持久化状态、评估会话 |

### 4.2 钩子脚本

所有钩子脚本均位于 `.trae/scripts/hooks/` 目录下：
- **suggest-compact.js** - 建议手动压缩上下文
- **pre-compact.js** - 压缩前保存状态
- **session-start.js** - 会话开始加载上下文
- **session-end.js** - 会话结束持久化状态
- **evaluate-session.js** - 评估会话提取模式
- **check-console-log.js** - 检查 console.log 语句

## 5. 规则模块 (Rules)

### 5.1 已配置的规则

| 规则名称 | 描述 | 适用范围 |
|---------|------|----------|
| **code-quality.md** | 代码质量规则 | 所有代码 |
| **coding-style.md** | 编码风格规则 | 所有代码 |
| **security.md** | 安全规则 | 所有代码 |
| **testing.md** | 测试规则 | 测试代码 |
| **development-workflow.md** | 开发工作流规则 | 开发流程 |
| **git-workflow.md** | Git 工作流规则 | Git 使用 |
| **hooks.md** | 钩子规则 | 钩子配置 |
| **patterns.md** | 设计模式规则 | 代码设计 |
| **performance.md** | 性能规则 | 性能优化 |
| **agents.md** | 代理规则 | 代理使用 |

## 6. 配置文件结构

```
.trae/
├── agents/          # 代理配置文件
├── commands/        # 命令配置文件
├── skills/          # 技能配置文件
├── hooks/           # 钩子配置文件
├── rules/           # 规则配置文件
├── scripts/         # 脚本文件
│   └── hooks/       # 钩子脚本
├── documents/       # 文档文件
└── README.md        # 配置说明文档
```

## 7. 环境适配说明

### 7.1 Windows 环境适配

- **路径分隔符**: 使用 Windows 路径分隔符 (`\`)
- **脚本路径**: 所有脚本路径均使用绝对路径
- **tmux 替代**: 使用 Windows Terminal 或 WSL 作为替代方案
- **钩子调整**: 调整钩子逻辑以适应 Windows 环境

### 7.2 Trae IDE 适配

- **工具集**: 根据 Trae IDE 可用工具调整配置
- **钩子兼容性**: 确保钩子在 Trae IDE 环境中正常执行
- **路径变量**: 替换 ${CLAUDE_PLUGIN_ROOT} 为绝对路径

## 8. 版本信息

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| **1.0.1** | 2026-02-03 | 将所有代理模型从 Claude (opus) 更改为 Doubao |
| **1.0.0** | 2026-02-02 | 初始版本发布，集成 Everything Claude Code 核心功能 |

## 9. 维护指南

### 9.1 定期更新

- **检查上游更新**: 定期检查 Everything Claude Code 项目的更新
- **同步配置**: 手动同步新的配置和功能
- **测试兼容性**: 确保更新后的配置在 Trae IDE 中正常工作

### 9.2 故障排除

| 问题 | 可能原因 | 解决方案 |
|------|---------|----------|
| **钩子执行失败** | 脚本路径错误 | 检查脚本路径是否正确 |
| **命令无响应** | 代理配置错误 | 检查代理文件的模型配置 |
| **构建错误** | TypeScript 配置 | 使用 /build-fix 命令解决 |
| **性能问题** | 钩子执行过慢 | 禁用不必要的钩子 |

## 10. 总结

Everything Doubao Code 集成了丰富的 AI 辅助开发工具，包括：

- **13 个专业代理**：覆盖架构设计、代码审查、构建错误解决等多个领域
- **25+ 个实用命令**：提供从规划到测试的完整工作流支持
- **28+ 个专业技能**：涵盖前端、后端、数据库等多个技术栈
- **6 个钩子事件**：自动化代码质量检查、测试验证等流程
- **10 个规则集**：确保代码质量、安全性和一致性

这些工具共同构成了一个完整的 AI 辅助开发生态系统，能够显著提升开发效率和代码质量。